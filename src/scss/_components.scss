@use 'mixins';

/* ---------- Buttons ---------- */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  transition: var(--transition-fast);
  padding: 10px 12px;
  border: 1px solid color-mix(in srgb, var(--violet), transparent 65%);
  background: color-mix(in srgb, var(--violet), transparent 93%);
  color: var(--text);
  border-radius: 14px;

  &:hover,
  &:focus-visible {
    transform: translateY(-1px);
    border-color: color-mix(in srgb, var(--accent-gold), transparent 35%);
    background: color-mix(in srgb, var(--magenta), transparent 88%);
    @include mixins.glow-box(var(--accent-gold), 14px, 72%);
    text-decoration: none;
  }

  &:focus-visible {
    outline: 2px solid color-mix(in srgb, var(--accent-gold), transparent 25%);
    outline-offset: 3px;
    @include mixins.glow-box(var(--accent-gold), 20px, 72%);
  }
}

.btn--nav {
  width: 100%;
  justify-content: center;
  border-radius: 999px;
}

.btn--module {
  margin-top: auto;
  justify-content: center;
  border-radius: 14px;
}

.btn__icon {
  font-size: 16px;
  line-height: 1;
  flex-shrink: 0;
}

/* ---------- Alerts ---------- */
.alert {
  position: relative;
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in srgb, var(--accent) 25%, transparent);
  border-left: 4px solid var(--accent);
  padding: 14px 16px;
  margin: 16px 0;
  background: rgba(255, 255, 255, 0.02);
  box-shadow: 0 0 14px color-mix(in srgb, var(--accent) 18%, transparent), 0 0 6px rgba(0, 0, 0, 0.35);

  &::before {
    content: "";
    position: relative;
    overflow: hidden;
    inset: -2px;
    background: linear-gradient(120deg, transparent 0%, color-mix(in srgb, var(--accent), transparent 82%) 30%, transparent 60%, color-mix(in srgb, var(--accent), transparent 88%) 78%, transparent 100%);
    opacity: 0.55;
    filter: blur(14px);
    pointer-events: none;
  }

  a {
    color: var(--accent);
    text-decoration: underline;
    text-underline-offset: 3px;
  }
}

.alert__head {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.alert__icon {
  font-size: 18px;
  line-height: 1;
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: color-mix(in srgb, var(--accent), transparent 10%);
  text-shadow: 0 0 8px color-mix(in srgb, var(--accent), transparent 70%);
}

.alert__title {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.3px;
  text-transform: uppercase;
  line-height: 1;
  color: color-mix(in srgb, var(--accent), transparent 5%);
  text-shadow: 0 0 8px color-mix(in srgb, var(--accent), transparent 75%);
}

.alert__text {
  margin: 0;
  font-size: 14px;
  line-height: 1.6;
  color: var(--muted);

  + .alert__text { margin-top: 8px; }
}

/* Variantes de Alerta */
.alert--note { --accent: rgb(124, 77, 255); }
.alert--tip { --accent: var(--success); }
.alert--information { --accent: rgb(0, 229, 255); }
.alert--caution { --accent: rgb(255, 65, 108); }
.alert--warning { --accent: rgb(255, 215, 0); }

/* ---------- Badges ---------- */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  line-height: 1;
  white-space: nowrap;
  border: 1px solid transparent;
}

.badge--default { background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2); color: var(--text); }
.badge--new { background: color-mix(in srgb, var(--cyan), transparent 85%); border-color: color-mix(in srgb, var(--cyan), transparent 60%); color: var(--cyan); @include mixins.glow-box(var(--cyan), 8px, 80%); }
.badge--updated { background: color-mix(in srgb, var(--accent-gold), transparent 85%); border-color: color-mix(in srgb, var(--accent-gold), transparent 60%); color: var(--accent-gold); }
.badge--hot { background: color-mix(in srgb, var(--magenta), transparent 85%); border-color: color-mix(in srgb, var(--magenta), transparent 60%); color: var(--magenta); @include mixins.glow-box(var(--magenta), 8px, 80%); }

/* ---------- Breadcrumb ---------- */
.breadcrumb {
  margin-bottom: 16px;
  font-size: 13px;
  color: var(--muted);
}

.breadcrumb__list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
}

.breadcrumb__item { display: flex; align-items: center; gap: 8px; }

.breadcrumb__link {
  color: var(--cyan);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: var(--transition-fast);
  opacity: 0.8;

  &:hover {
    opacity: 1;
    text-shadow: 0 0 8px color-mix(in srgb, var(--cyan), transparent 60%);
    text-decoration: none;
  }
}

.breadcrumb__separator { color: rgba(255, 255, 255, 0.2); font-size: 12px; }
.breadcrumb__current { color: rgba(255, 255, 255, 0.5); display: flex; align-items: center; gap: 6px; cursor: default; }

/* ---------- Code Block ---------- */
.terminal__block {
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(217,217,217,0.35);
  border-radius: 14px;
  padding: 14px;
  color: rgba(255, 255, 255, 0.9);
  box-shadow: 0 0 14px rgba(217,217,217,0.18);
  overflow-x: auto;
  max-width: 100%;
}

.terminal__block--bash::before { content: "$ bash"; display: block; font-size: 12px; color: color-mix(in srgb, var(--cyan), transparent 30%); margin-bottom: 8px; font-weight: 600; }
.terminal__block--powershell::before { content: "PS>"; display: block; font-size: 12px; color: color-mix(in srgb, var(--accent-gold), transparent 30%); margin-bottom: 8px; font-weight: 600; }
.terminal__block--markdown::before { content: "# markdown"; display: block; font-size: 12px; color: color-mix(in srgb, var(--magenta), transparent 30%); margin-bottom: 8px; font-weight: 600; }

.code-block-wrapper { position: relative; margin: 16px 0; }

.code-block__copy-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 6px;
  color: var(--muted);
  padding: 6px 10px;
  font-size: 14px;
  cursor: pointer;
  transition: var(--transition-fast);
  display: flex;
  align-items: center;
  gap: 6px;

  &:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--cyan);
    border-color: var(--cyan);
    @include mixins.glow-box(var(--cyan), 15px, 60%);
  }

  &.copied {
    color: var(--cyan);
    border-color: var(--cyan);
    background: rgba(0, 229, 255, 0.1);
  }
}

/* ---------- Modal ---------- */
.modal {
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 250ms ease;

  &.is-open { opacity: 1; pointer-events: auto; .modal__container { transform: translateY(0); } }
}

.modal__overlay { position: absolute; inset: 0; background: rgba(0, 0, 0, 0.75); backdrop-filter: blur(4px); }

.modal__container {
  position: relative;
  width: 90%;
  max-width: 500px;
  background: linear-gradient(135deg, rgba(7, 10, 18, 0.98), rgba(7, 10, 18, 0.95));
  border: 1px solid color-mix(in srgb, var(--cyan), transparent 65%);
  border-radius: var(--radius);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
  transform: translateY(20px);
  transition: transform 250ms ease;
  display: flex;
  flex-direction: column;
  max-height: 90vh;
}

.modal__header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
.modal__title { margin: 0; font-size: 18px; color: var(--text); }
.modal__close { background: transparent; border: none; color: var(--muted); cursor: pointer; font-size: 18px; padding: 4px; transition: color 150ms; &:hover { color: var(--cyan); } }
.modal__content { padding: 20px; overflow-y: auto; color: var(--muted); }

/* ---------- Tabs ---------- */
.tabs { margin: 24px 0; }
.tabs__list { display: flex; flex-wrap: wrap; gap: 2px; border-bottom: 1px solid color-mix(in srgb, var(--cyan), transparent 80%); margin-bottom: 0; }

.tabs__trigger {
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--muted);
  padding: 10px 16px;
  font-family: inherit;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition-fast);
  display: inline-flex;
  align-items: center;
  gap: 8px;

  &:hover { color: var(--text); background: rgba(255, 255, 255, 0.02); }
  &[aria-selected="true"] { color: var(--cyan); border-bottom-color: var(--cyan); background: linear-gradient(to top, color-mix(in srgb, var(--cyan), transparent 95%), transparent); }
}

.tabs__panel { padding: 20px; background: rgba(255, 255, 255, 0.02); border: 1px solid color-mix(in srgb, var(--cyan), transparent 85%); border-top: none; border-radius: 0 0 var(--radius-sm) var(--radius-sm); }

/* ---------- Accordion ---------- */
.accordion { display: flex; flex-direction: column; gap: 8px; margin: 24px 0; }
.accordion__item { border: 1px solid color-mix(in srgb, var(--cyan), transparent 80%); border-radius: var(--radius-sm); background: rgba(255, 255, 255, 0.02); overflow: hidden; }

.accordion__trigger {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: transparent;
  border: none;
  color: var(--text);
  cursor: pointer;
  text-align: left;
  transition: background 140ms ease;

  &:hover { background: rgba(255, 255, 255, 0.03); }
  &[aria-expanded="true"] { background: rgba(0, 229, 255, 0.05); color: var(--cyan); .accordion__icon { transform: rotate(180deg); } }
}

.accordion__content { padding: 16px; border-top: 1px solid color-mix(in srgb, var(--cyan), transparent 85%); color: var(--muted); }

@keyframes accordionFadeIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
.accordion__panel:not([hidden]) { animation: accordionFadeIn 250ms ease-out; }

/* ---------- Video ---------- */
.video-component { margin: 24px 0; }
.video-container { position: relative; width: 100%; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: var(--radius-sm); border: 1px solid color-mix(in srgb, var(--cyan), transparent 80%); background: rgba(0, 0, 0, 0.2); box-shadow: 0 0 20px rgba(0, 0, 0, 0.3); iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; } }
.video-caption { margin-top: 10px; font-size: 13px; color: var(--muted); text-align: center; line-height: 1.4; }

/* ---------- Tooltip ---------- */
.tooltip { position: relative; cursor: help; border-bottom: 1px dotted var(--cyan); text-decoration: none; display: inline-block; &:focus { outline: none; border-bottom-style: solid; } }
.tooltip__box { position: absolute; bottom: calc(100% + 8px); left: 50%; transform: translateX(-50%) translateY(5px); width: max-content; max-width: 300px; padding: 12px 16px; background: linear-gradient(135deg, rgba(7, 10, 18, 0.98), rgba(7, 10, 18, 0.95)); border: 1px solid color-mix(in srgb, var(--cyan), transparent 65%); border-radius: var(--radius-sm); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); color: var(--muted); font-size: 13px; line-height: 1.5; text-align: left; z-index: 100; opacity: 0; visibility: hidden; pointer-events: none; transition: opacity 0.2s ease, transform 0.2s ease; }
.tooltip:hover .tooltip__box, .tooltip:focus .tooltip__box { opacity: 1; visibility: visible; pointer-events: auto; transform: translateX(-50%) translateY(0); }

/* ---------- Quiz ---------- */
.quiz { background: rgba(255, 255, 255, 0.02); border: 1px solid color-mix(in srgb, var(--cyan), transparent 80%); border-radius: var(--radius-sm); padding: 20px; margin: 24px 0; }
.quiz__question { margin: 0 0 16px; font-weight: 600; font-size: 16px; color: var(--text); }
.quiz__options { display: flex; flex-direction: column; gap: 8px; }

.quiz__option {
  display: flex; align-items: center; justify-content: space-between; width: 100%; padding: 12px 16px; background: rgba(255, 255, 255, 0.05); border: 1px solid transparent; border-radius: 8px; color: var(--muted); font-size: 14px; cursor: pointer; transition: var(--transition-fast); text-align: left;
  &:hover:not(:disabled) { background: rgba(255, 255, 255, 0.08); border-color: rgba(255, 255, 255, 0.1); color: var(--text); }
  &:disabled { cursor: default; opacity: 0.7; }
  &.is-correct { background: color-mix(in srgb, var(--success), transparent 90%); border-color: var(--success); color: var(--success); .quiz__status-icon { opacity: 1; transform: scale(1); } }
  &.is-incorrect, &.is-incorrect:hover { background: color-mix(in srgb, var(--caution), transparent 90%); border-color: var(--caution); color: var(--caution); .quiz__status-icon { opacity: 1; transform: scale(1); } }
}

.quiz__status-icon { opacity: 0; transform: scale(0.5); transition: all 0.2s ease; }

@keyframes quizSlideDown { 0% { opacity: 0; transform: translateY(-10px); max-height: 0; margin: 0; padding: 0; border-width: 0; } 100% { opacity: 1; transform: translateY(0); max-height: 500px; margin-top: 4px; margin-bottom: 8px; padding-top: 12px; padding-bottom: 12px; border-width: 1px; } }

.quiz__feedback { margin-top: 4px; margin-bottom: 8px; padding: 12px; border-radius: 8px; font-size: 14px; display: flex; flex-direction: column; gap: 10px; overflow: hidden; animation: quizSlideDown 0.4s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
.quiz__feedback--correct { background: color-mix(in srgb, var(--success), transparent 90%); color: var(--success); border: 1px solid color-mix(in srgb, var(--success), transparent 70%); }
.quiz__feedback--incorrect { background: color-mix(in srgb, var(--caution), transparent 90%); color: var(--caution); border: 1px solid color-mix(in srgb, var(--caution), transparent 70%); }
.quiz__feedback-header { display: flex; align-items: center; gap: 8px; font-weight: 600; }
.quiz__explanation { padding-top: 10px; border-top: 1px solid currentColor; opacity: 0.9; line-height: 1.5; &:empty { display: none; } }
.quiz__footer { margin-top: 16px; display: flex; justify-content: flex-end; border-top: 1px solid rgba(255, 255, 255, 0.1); padding-top: 12px; &[hidden] { display: none; } }
.quiz__reset-btn { background: transparent; border: 1px solid var(--border); color: var(--muted); padding: 8px 14px; border-radius: 8px; font-size: 13px; cursor: pointer; transition: var(--transition-fast); display: inline-flex; align-items: center; gap: 6px; &:hover { border-color: var(--cyan); color: var(--cyan); background: rgba(0, 229, 255, 0.05); } }

#quiz-score-display { background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border); padding: 12px 20px; border-radius: 999px; display: inline-flex; align-items: center; gap: 10px; font-size: 14px; color: var(--text); margin-bottom: 24px; &.quiz-score--completed { border-color: var(--success); background: color-mix(in srgb, var(--success), transparent 90%); color: var(--success); } }

/* ---------- Back to Top ---------- */
.back-to-top { position: fixed; bottom: 30px; right: 30px; width: 45px; height: 45px; border-radius: 50%; background: color-mix(in srgb, var(--cyan), transparent 10%); border: 1px solid var(--cyan); color: #000; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transform: translateY(20px); transition: all 0.3s ease; z-index: 999; @include mixins.glow-box(var(--cyan), 15px, 50%); &.is-visible { opacity: 1; visibility: visible; transform: translateY(0); } &:hover { background: var(--cyan); @include mixins.glow-box(var(--cyan), 25px, 30%); transform: translateY(-3px); } }
